<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE elasticMapper SYSTEM "elasticmapping.dtd">
<elasticMapper name="orditem" desc="导入医嘱数据" business="oe">
    <propertys>
        <property sourceName="ord_id"  targetName="oe_ord_id" valueType="String" idField="true"></property>
        <property sourceName="ord_admno" targetName="admno" valueType="String" rowKey="true" parentField="true"></property>
        <property sourceName="ord_regno" targetName="regno" valueType="String" routingField="true"></property>
        <!--医嘱代码-->
        <property sourceName="ord_code" targetName="oe_ord_code"  valueType="String"></property>
        <!--医嘱名称-->
        <property sourceName="ord_code" targetName="oe_ord_name" valueType="String">
            <dicConvertor methodName="getByCode" dicType="OrderItem">
                <parameter></parameter>
            </dicConvertor>
        </property>
        <!--医嘱大分类-->
        <property sourceName="ord_code" targetName="oe_ord_orcat" valueType="String">
            <dicConvertor methodName="getByCode" dicType="OrdCateage">
                <parameter>ord_code</parameter>
            </dicConvertor>
        </property>
        <!--医嘱类型-->
        <property sourceName="ord_type_code" targetName="oe_ord_type" valueType="String">
            <dicConvertor methodName="getByCode" dicType="OrdType">
                <parameter></parameter>
            </dicConvertor>
        </property>
        <!--周期-->
        <property sourceName="ord_period" targetName="oe_ord_period" valueType="String">
        </property>
        <!--疗程-->
        <property sourceName="ord_duration_code" targetName="oe_ord_duration" valueType="String">
            <dicConvertor methodName="getByCode" dicType="Duration">
                <parameter>ord_duration_code</parameter>
            </dicConvertor>
        </property>
        <!--用法 - 用药途径-->
        <property sourceName="ord_usage_code" targetName="oe_ord_instr" valueType="String">
            <dicConvertor methodName="getByCode" dicType="InstrUsage">
                <parameter></parameter>
            </dicConvertor>
        </property>
        <!--频次-->
        <property sourceName="ord_freq_code" targetName="oe_ord_freq" valueType="String">
            <dicConvertor methodName="getByCode" dicType="Freq">
                <parameter>ord_freq_code</parameter>
            </dicConvertor>
        </property>
        <!--医嘱开始时间-->
        <property sourceName="ord_startdate" targetName="oe_ord_starttime" valueType="String">
            <dateConcatConvertor methodName="concatDatetime">
                <dateParameter value="ord_startdate"></dateParameter>
                <timeParameter value="ord_starttime"></timeParameter>
            </dateConcatConvertor>
        </property>
        <!--医嘱状态-->
        <property sourceName="ord_status_code" targetName="oe_ord_status" valueType="String">
            <dicConvertor methodName="getByCode" dicType="OrderStatus">
                <parameter></parameter>
            </dicConvertor>
        </property>
        <!--医嘱数量-->
        <property sourceName="ord_orderqty" targetName="oe_ord_orderqty" valueType="String">
        </property>
        <!--医嘱结束时间-->
        <property sourceName="ord_enddate" targetName="oe_ord_endtime" valueType="String">
            <dateConcatConvertor methodName="concatDatetime">
                <dateParameter value="ord_enddate"></dateParameter>
                <timeParameter value="ord_endtime"></timeParameter>
            </dateConcatConvertor>
        </property>
        <!--开医嘱科室-->
        <property sourceName="ord_dept_code" targetName="oe_ord_dept_name" valueType="String">
            <dicConvertor methodName="getByCode" dicType="Deptartment">
                <parameter>ord_dept_code</parameter>
            </dicConvertor>
        </property>
        <!--执行医嘱科室-->
        <property sourceName="ord_execdept_code" targetName="oe_ord_execdept_name" valueType="String">
            <dicConvertor methodName="getByCode" dicType="Deptartment">
                <parameter></parameter>
            </dicConvertor>
        </property>
        <!--医嘱执行时间-->
        <property sourceName="ord_dateexecuted" targetName="oe_ord_execdate">
            <dateConcatConvertor methodName="concatDatetime">
                <dateParameter value="ord_dateexecuted"></dateParameter>
                <timeParameter value="ord_timeexecuted"></timeParameter>
            </dateConcatConvertor>
        </property>
        <!--归一后医嘱编码-->
        <property sourceName="ord_code" targetName="oe_ord_meddiccode" valueType="String">
        </property>
        <!--归一后医嘱名称-->
        <property sourceName="ord_code" targetName="oe_ord_meddicname" valueType="String">
            <dicConvertor methodName="getByCode" dicType="OrderItem">
                <parameter></parameter>
            </dicConvertor>
        </property>
        <!--单次剂量-->
        <property sourceName="ord_doseqty" targetName="oe_ord_dosage" valueType="String"></property>
    </propertys>

    <outputs>
        <output>
            <elasticsearch index="csmsearch" type="doc"></elasticsearch>
        </output>
    </outputs>
</elasticMapper>